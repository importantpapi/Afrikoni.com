/* ============================================================
   AFRIKONI 2026 TRADE OS DESIGN SYSTEM
   Premium Dark-First · Glassmorphism · Bloomberg-Grade Density
   ============================================================ */

/* Base layer content moved out of @layer for Tailwind compatibility */
:root {
  /* Core Brand Colors - Gold & Earth (from Afrikoni Logo) */
  /* Dual accent system: WCAG AA compliant for text on ivory */
  --os-accent: 38 70% 42%;
  /* Darker for text (WCAG AA: 4.5:1 on ivory) */
  --os-accent-bg: 38 65% 50%;
  /* Original for large elements/backgrounds */
  --os-accent-text: 38 75% 35%;
  /* Extra dark for small text */
  --os-accent-light: 38 70% 60%;
  --os-accent-dark: 38 60% 40%;
  --os-accent-glow: 38 80% 65%;

  /* Warm Earth Tones from Logo */
  --afrikoni-brown: 25 40% 15%;
  --afrikoni-brown-light: 25 35% 25%;
  --afrikoni-earth: 20 30% 12%;
  --afrikoni-warm-brown: 28 42% 28%;
  --afrikoni-deep: 25 43% 21%;
  --afrikoni-chestnut: 25 45% 28%;

  /* LUXURIOUS LOGO GOLD (Hand-tuned from Asset) */
  --afrikoni-brand-gold: 43 80% 46%;
  --afrikoni-gold-shimmer: 45 100% 58%;
  --afrikoni-gold-deep: 40 100% 25%;
  --afrikoni-muted-gold: 42 64% 42%;

  --afrikoni-cream: 35 30% 96%;
  --afrikoni-offwhite: 35 20% 98%;
  --afrikoni-ivory: 35 25% 96%;

  /* LIGHT MODE (Warm Horizon 2026 - Afrikoni Ivory Base) */
  --background: 35 30% 96%;
  /* #FAF9F6 range */
  --foreground: 25 30% 12%;
  /* Warm charcoal */

  /* PREMIUM BRAND GOLD (Crest Authority) */
  --primary: 38 75% 48%;
  /* Brand Gold — single definition */
  --primary-foreground: 220 40% 10%;

  --card: 0 0% 100%;
  --card-foreground: 220 30% 12%;

  --popover: 0 0% 100%;
  --popover-foreground: 220 30% 12%;

  --secondary: 220 15% 94%;
  --secondary-foreground: 220 30% 15%;

  --muted: 220 10% 96%;
  --muted-foreground: 220 15% 40%;

  --accent: 38 60% 95%;
  --accent-foreground: 38 75% 35%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --border: 220 15% 90%;
  --input: 220 15% 90%;
  --ring: 38 75% 48%;

  --radius: 0.75rem;
  /* Smoother corners */

  /* Sidebar (Horizon 2026) */
  --sidebar-background: 220 25% 10%;
  --sidebar-foreground: 38 20% 90%;
  --sidebar-primary: 38 75% 48%;
  --sidebar-primary-foreground: 220 40% 10%;
  --sidebar-accent: 220 20% 14%;
  --sidebar-accent-foreground: 38 20% 92%;
  --sidebar-border: 220 20% 16%;
  --sidebar-ring: 38 75% 48%;

  /* Semantic Status */
  --success: 158 85% 42%;
  --success-foreground: 0 0% 100%;
  --warning: 42 100% 50%;
  --warning-foreground: 220 40% 10%;
  --info: 210 100% 52%;
  --info-foreground: 0 0% 100%;

  /* Trade Status Colors */
  --status-verified: 158 85% 42%;
  --status-pending: 42 100% 50%;
  --status-inactive: 220 10% 60%;
  --status-rejected: 0 84% 60%;
  --status-in-progress: 210 100% 52%;

  /* Card Variants (Horizon 2026 Soft Glows) */
  --card-gold: 38 50% 97%;
  --card-green: 158 40% 97%;
  --card-blue: 210 50% 97%;
  --card-rose: 350 50% 97%;

  /* Premium Shadows (High Contrast) */
  --shadow-sm: 0 2px 4px 0 hsl(220 30% 10% / 0.05);
  --shadow-md: 0 8px 16px -4px hsl(220 30% 10% / 0.08), 0 4px 8px -2px hsl(220 30% 10% / 0.04);
  --shadow-os-md: 0 24px 48px -8px hsl(220 30% 10% / 0.12), 0 8px 16px -4px hsl(220 30% 10% / 0.06);
  --shadow-gold: 0 8px 24px -6px hsl(38 75% 48% / 0.2);
  --shadow-glow: 0 0 32px hsl(38 75% 48% / 0.12);

  /* Glass + glow tokens (Enhanced) */
  --glass-bg: hsl(var(--card) / 0.75);
  --glass-border: hsl(var(--border) / 0.5);
  --gold-lux-gradient: linear-gradient(135deg, hsl(43 80% 46%) 0%, hsl(45 100% 58%) 50%, hsl(40 100% 25%) 100%);
  --glass-glow: 0 0 32px hsl(var(--primary) / 0.15);
  --glass-ambient: 0 32px 64px -16px hsl(220 30% 10% / 0.2);
  --gradient-core: linear-gradient(135deg, hsl(38 75% 48%) 0%, hsl(38 85% 60%) 50%, hsl(38 65% 35%) 100%);

  /* Trade OS semantic tokens */
  --os-bg: hsl(var(--background));
  --os-surface-0: hsl(var(--card) / 0.98);
  --os-surface-1: hsl(var(--card) / 0.92);
  --os-surface-2: hsl(var(--card) / 0.85);
  --os-stroke: hsl(var(--border) / 0.8);
  --os-text-primary: hsl(var(--foreground));
  --os-text-secondary: hsl(var(--muted-foreground));
  --os-muted: hsl(var(--muted-foreground));
  --os-accent: hsl(var(--primary));
  --os-glow: 0 0 32px hsl(var(--primary) / 0.15);
}

/* ============================================================
   DARK MODE (Warm Horizon 2026 - Charcoal Base)
   ============================================================ */
.dark {
  /* Warm Deep Afrikoni Brown backgrounds (instead of near-black) */
  --background: 25 40% 12%;
  /* Warm charcoal-brown base */
  --foreground: 35 15% 94%;
  /* Warm off-white */

  /* Glassmorphic cards with warmth */
  --card: 25 18% 11%;
  --card-foreground: 35 15% 94%;

  --popover: 25 18% 11%;
  --popover-foreground: 35 15% 94%;

  /* High-Octane Gold (maintain vibrancy) */
  --primary: 38 80% 58%;
  --primary-foreground: 25 20% 8%;

  --secondary: 25 15% 14%;
  --secondary-foreground: 35 15% 88%;

  --muted: 25 15% 12%;
  --muted-foreground: 35 10% 60%;

  --accent: 28 20% 18%;
  /* Warm brown accent */
  --accent-foreground: 38 85% 65%;

  --destructive: 0 92% 65%;
  --destructive-foreground: 0 0% 100%;

  --border: 28 15% 20%;
  /* Warm brown border */
  --input: 25 15% 14%;
  --ring: 38 85% 65%;

  /* Dark sidebar with warmth */
  --sidebar-background: 25 25% 6%;
  --sidebar-foreground: 220 15% 90%;
  --sidebar-primary: 38 80% 58%;
  --sidebar-primary-foreground: 220 20% 4%;
  --sidebar-accent: 220 20% 12%;
  --sidebar-accent-foreground: 38 85% 65%;
  --sidebar-border: 220 15% 14%;
  --sidebar-ring: 38 80% 58%;

  /* Adjusted card variants for dark (Spectral Glows) */
  --card-gold: 38 50% 10%;
  --card-green: 158 50% 8%;
  --card-blue: 210 50% 10%;
  --card-rose: 350 50% 10%;

  /* Dark mode shadows (Obsidian Depth) */
  --shadow-sm: 0 2px 4px 0 hsl(0 0% 0% / 0.4);
  --shadow-md: 0 12px 24px -8px hsl(0 0% 0% / 0.6), 0 4px 12px -4px hsl(0 0% 0% / 0.4);
  --shadow-os-md: 0 32px 64px -16px hsl(0 0% 0% / 0.8), 0 12px 24px -6px hsl(0 0% 0% / 0.6);
  --shadow-gold: 0 8px 32px -4px hsl(38 80% 58% / 0.4);
  --shadow-glow: 0 0 40px hsl(38 80% 58% / 0.25);

  --glass-bg: hsl(var(--card) / 0.65);
  --glass-border: hsl(var(--border) / 0.6);
  --glass-glow: 0 0 40px hsl(38 85% 65% / 0.3);
  --glass-ambient: 0 32px 64px -16px hsl(0 0% 0% / 0.5);
  --gradient-core: linear-gradient(135deg, hsl(38 80% 58%) 0%, hsl(38 95% 70%) 40%, hsl(38 70% 45%) 100%);

  --os-bg: hsl(var(--background));
  --os-surface-0: hsl(var(--card) / 0.85);
  --os-surface-1: hsl(var(--card) / 0.75);
  --os-surface-2: hsl(var(--card) / 0.65);
  --os-stroke: hsl(var(--border) / 0.8);
  --os-text-primary: hsl(var(--foreground));
  --os-text-secondary: hsl(var(--muted-foreground));
  --os-muted: hsl(var(--muted-foreground));
  --os-accent: hsl(var(--primary));
  --os-glow: 0 0 40px hsl(var(--primary) / 0.3);
}

/* ============================================================
   SOLID SURFACE SYSTEM (INSTITUTIONAL WEIGHT)
   Apple uses glassmorphism sparingly. Cards = solid.
   Hermès principle: Physical weight over floating glass.
   ============================================================ */
.os-surface-solid {
  background: var(--os-surface-solid);
  border: 1px solid var(--os-stroke);
  border-radius: var(--os-radius-md, 16px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06);
}

.os-surface-ivory {
  background: var(--os-bg);
  border: 1px solid var(--os-stroke);
  border-radius: var(--os-radius-md, 16px);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.os-surface-elevated {
  background: var(--os-surface-solid);
  border: 1px solid var(--os-stroke);
  border-radius: var(--os-radius-lg, 24px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
}

/* Use glassmorphism ONLY for overlays, not content */
.glass-surface-minimal {
  background: var(--os-surface);
  backdrop-filter: blur(10px) saturate(180%);
  border: 1px solid var(--os-stroke);
}

/* ============================================================
   OS LITE MODE & PERFORMANCE OVERRIDES
   ============================================================ */
.os-lite-mode {
  --glass-bg: hsl(var(--card) / 0.95);
  --glass-border: hsl(var(--border) / 1);
  --glass-glow: none;
  --glass-ambient: none;
  --os-surface-0: hsl(var(--card));
  --os-surface-1: hsl(var(--card));
  --os-glow: none;
}

.os-lite-mode * {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.os-reduced-motion * {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  /* Premium scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border/50 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/30;
  }
}

@layer components {

  /* ============================================================
     GLASSMORPHIC CARDS
     ============================================================ */
  .glass-card {
    border-radius: theme('borderRadius.os-md');
    @apply border border-border/60;
    background: var(--glass-bg);
    backdrop-filter: blur(16px);
    box-shadow: var(--glass-ambient), var(--glass-glow);
  }

  .glass-card-elevated {
    border-radius: theme('borderRadius.os-md');
    @apply border border-border/40;
    background: hsl(var(--card) / 0.8);
    backdrop-filter: blur(18px);
    box-shadow: var(--glass-ambient), 0 0 32px hsl(var(--primary) / 0.18);
  }

  /* ============================================================
   METRIC CARDS (Bloomberg-style)
   ============================================================ */
  .metric-card {
    @apply relative p-5 border border-border/60 transition-all duration-300;
    border-radius: theme('borderRadius.os-md');
    background: hsl(var(--card) / 0.92);
    box-shadow: var(--glass-ambient);
  }

  .metric-card:hover {
    box-shadow: var(--glass-ambient), var(--glass-glow);
    transform: translateY(-2px);
  }

  .metric-card-gold {
    background: linear-gradient(135deg, hsl(var(--card-gold)) 0%, hsl(var(--card)) 100%);
    border-color: hsl(var(--primary) / 0.2);
  }

  .metric-card-success {
    background: linear-gradient(135deg, hsl(var(--card-green)) 0%, hsl(var(--card)) 100%);
    border-color: hsl(var(--success) / 0.2);
  }

  .metric-value {
    @apply text-3xl font-bold tracking-tight text-foreground;
    font-variant-numeric: tabular-nums;
  }

  .metric-label {
    @apply font-medium uppercase tracking-wider text-muted-foreground;
    font-size: theme('fontSize.os-xs');
  }

  /* ============================================================
   STATUS BADGES
   ============================================================ */
  .status-badge {
    @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full font-medium;
    font-size: theme('fontSize.os-xs');
  }

  .status-verified {
    @apply text-success border-success/20;
    background-color: hsl(var(--success) / 0.15);
  }

  .status-pending {
    @apply text-warning border-warning/20;
    background-color: hsl(var(--warning) / 0.15);
  }

  .status-inactive {
    background-color: hsl(var(--muted));
    color: hsl(var(--muted-foreground));
    border: 1px solid hsl(var(--border));
  }

  .status-rejected {
    @apply text-destructive border-destructive/20;
    background-color: hsl(var(--destructive) / 0.15);
  }

  .status-in-progress {
    @apply text-info border-info/20;
    background-color: hsl(var(--info) / 0.15);
  }

  /* ============================================================
   PREMIUM CTAs
   ============================================================ */
  .btn-gold {
    @apply relative overflow-hidden font-semibold;
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--os-accent-dark)) 100%);
    box-shadow: var(--shadow-gold);
    transition: all 0.2s ease;
  }

  .btn-gold:hover {
    background: linear-gradient(135deg, hsl(var(--os-accent-light)) 0%, hsl(var(--primary)) 100%);
    box-shadow: var(--shadow-glow), var(--shadow-gold);
    transform: translateY(-1px);
  }

  .btn-glass {
    @apply backdrop-blur-sm border border-border/50;
    background: hsl(var(--card) / 0.5);
  }

  .btn-glass:hover {
    background: hsl(var(--card) / 0.8);
  }

  /* ============================================================
   PROGRESS INDICATORS
   ============================================================ */
  .progress-gold {
    @apply h-2 rounded-full overflow-hidden;
    background: hsl(var(--muted));
  }

  .progress-gold-fill {
    @apply h-full rounded-full transition-all duration-500 ease-out;
    background: linear-gradient(90deg, hsl(var(--primary)) 0%, hsl(var(--os-accent-light)) 100%);
    box-shadow: 0 0 8px hsl(var(--primary) / 0.4);
  }

  /* ============================================================
   TRADE PIPELINE STYLES
   ============================================================ */
  .pipeline-stage {
    @apply relative flex flex-col items-center;
  }

  .pipeline-stage-active {
    @apply text-primary;
  }

  .pipeline-connector {
    @apply absolute top-6 h-0.5 bg-border;
    left: 50%;
    width: 100%;
  }

  .pipeline-connector-active {
    background: linear-gradient(90deg, hsl(var(--primary)) 0%, hsl(var(--primary) / 0.3) 100%);
  }

  /* ============================================================
   DENSE DATA DISPLAYS (Terminal-style)
   ============================================================ */
  .data-grid {
    @apply grid gap-px bg-border/50 rounded-lg overflow-hidden;
  }

  .data-cell {
    @apply p-3 bg-card;
  }

  .data-label {
    @apply font-medium uppercase tracking-wider text-muted-foreground;
    font-size: theme('fontSize.os-xs');
  }

  .data-value {
    @apply font-semibold text-foreground tabular-nums;
    font-size: theme('fontSize.os-sm');
  }

  /* ============================================================
   COMMAND PALETTE STYLES
   ============================================================ */
  .command-palette {
    @apply border-0 shadow-2xl overflow-hidden;
    border-radius: theme('borderRadius.os-sm');
    background: hsl(var(--card) / 0.95);
    backdrop-filter: blur(20px);
  }

  /* ============================================================
     TRADE OS CORE SURFACES + TYPOGRAPHY
     ============================================================ */
  .os-page {
    position: relative;
    isolation: isolate;
    background: radial-gradient(circle at top left, hsl(var(--primary) / 0.08), transparent 45%),
      radial-gradient(circle at 20% 20%, hsl(var(--accent-foreground) / 0.1), transparent 55%),
      linear-gradient(180deg, hsl(var(--background)) 0%, hsl(var(--background)) 100%);
  }

  .os-page::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: 0;
    pointer-events: none;
    opacity: 0.5;
    background-image:
      linear-gradient(to right, hsl(var(--border) / 0.15) 1px, transparent 1px),
      linear-gradient(to bottom, hsl(var(--border) / 0.12) 1px, transparent 1px);
    background-size: 120px 120px;
    mask-image: radial-gradient(circle at 40% 10%, black, transparent 70%);
  }

  .os-page>* {
    position: relative;
    z-index: 1;
  }

  .os-stagger>* {
    animation: osFadeUp 0.4s ease-out;
  }

  @keyframes osFadeUp {
    from {
      opacity: 0;
      transform: translateY(8px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .os-label {
    @apply font-medium uppercase tracking-[0.2em];
    font-size: theme('fontSize.os-xs');
    color: var(--os-text-secondary);
  }

  .os-title {
    @apply font-semibold;
    font-size: theme('fontSize.os-2xl');
    letter-spacing: -0.02em;
    color: var(--os-text-primary);
  }

  .os-input {
    @apply border focus:outline-none focus:ring-2;
    border-radius: theme('borderRadius.os-sm');
    border-color: var(--os-stroke);
    background: var(--os-surface-1);
    box-shadow: inset 0 0 0 1px hsl(var(--border) / 0.2);
    color: var(--os-text-primary);
  }

  .os-input:focus {
    border-color: hsl(var(--primary) / 0.6);
    box-shadow: 0 0 0 2px hsl(var(--primary) / 0.25);
  }

  .os-input::placeholder {
    color: var(--os-muted);
  }

  .os-panel {
    @apply border;
    border-radius: theme('borderRadius.os-md');
    border-color: var(--os-stroke);
    background: var(--os-surface-0);
    box-shadow: var(--shadow-md);
  }

  .os-panel-soft {
    @apply border;
    border-radius: theme('borderRadius.os-md');
    border-color: hsl(var(--border) / 0.7);
    background: var(--os-surface-1);
    box-shadow: var(--shadow-sm);
  }

  .os-panel-glass {
    @apply border;
    border-radius: theme('borderRadius.os-md');
    border-color: hsl(var(--border) / 0.6);
    background: hsl(var(--card) / 0.55);
    backdrop-filter: blur(32px) saturate(1.5);
    box-shadow: var(--glass-ambient), var(--os-glow);
  }

  /* ============================================================
     HORIZON 2026 AMBIENT ORBS - Decorative Background Glows
     ============================================================ */
  .os-ambient-orb {
    position: absolute;
    width: 280px;
    height: 280px;
    border-radius: 999px;
    pointer-events: none;
    background: radial-gradient(circle, hsl(var(--primary) / 0.25), transparent 70%);
    filter: blur(60px);
    opacity: 0.6;
    z-index: 0;
  }

  .os-ambient-orb-sapphire {
    background: radial-gradient(circle, hsl(210 100% 60% / 0.3), transparent 70%);
  }

  .os-ambient-orb-emerald {
    background: radial-gradient(circle, hsl(158 85% 50% / 0.25), transparent 70%);
  }

  /* ============================================================
     BENTO GRID - Modern High-Density Layouts
     ============================================================ */
  .grid-bento {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  @media (min-width: 768px) {
    .grid-bento {
      grid-template-columns: repeat(3, 1fr);
    }

    .grid-bento-wide {
      grid-column: span 2;
    }

    .grid-bento-tall {
      grid-row: span 2;
    }

    .grid-bento-hero {
      grid-column: span 2;
      grid-row: span 2;
    }
  }

  @media (min-width: 1024px) {
    .grid-bento {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  .os-rail-glow {
    position: relative;
  }

  .os-rail-glow::after {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 24px;
    pointer-events: none;
    box-shadow: inset 0 0 0 1px hsl(var(--primary) / 0.1), 0 0 30px hsl(var(--primary) / 0.16);
    opacity: 0.7;
  }

  .os-immersive {
    @apply relative;
    border-radius: theme('borderRadius.os-lg');
    background:
      radial-gradient(circle at top, hsl(var(--primary) / 0.2), transparent 55%),
      linear-gradient(180deg, hsl(var(--card) / 0.55), transparent 70%);
    box-shadow: inset 0 0 0 1px hsl(var(--border) / 0.45), 0 0 40px hsl(var(--primary) / 0.12);
  }

  .os-glow-hover:hover {
    box-shadow: var(--shadow-os-md), var(--os-glow);
  }

  /* ============================================================
     ENHANCED GLOW EFFECTS - Horizon 2026
     ============================================================ */
  .os-glow {
    box-shadow: 0 0 40px hsl(var(--primary) / 0.25);
  }

  .os-glow-strong {
    box-shadow: 0 0 60px hsl(var(--primary) / 0.35), 0 0 20px hsl(var(--primary) / 0.2);
  }

  .os-glow-subtle {
    box-shadow: 0 0 24px hsl(var(--primary) / 0.15);
  }

  .os-glow-sapphire {
    box-shadow: 0 0 40px hsl(210 100% 60% / 0.3);
  }

  .os-glow-emerald {
    box-shadow: 0 0 40px hsl(158 85% 50% / 0.25);
  }

  .os-zone {
    @apply border p-6;
    border-radius: theme('borderRadius.os-lg');
    border-color: hsl(var(--border) / 0.7);
    background: linear-gradient(180deg, hsl(var(--card) / 0.85), hsl(var(--card) / 0.6));
    box-shadow: var(--shadow-md);
  }

  .os-zone-header {
    @apply flex items-center justify-between gap-3 mb-4;
  }

  .os-zone-title {
    @apply font-semibold tracking-wide text-[var(--os-text-primary)];
    font-size: theme('fontSize.os-sm');
  }

  .os-kernel-core {
    @apply relative overflow-hidden border p-5;
    border-radius: theme('borderRadius.os-lg');
    border-color: hsl(var(--border) / 0.7);
    background: radial-gradient(circle at top, hsl(var(--primary) / 0.18), transparent 55%),
      hsl(var(--card) / 0.7);
    box-shadow: var(--glass-ambient), var(--os-glow);
  }

  .os-kernel-orbit {
    position: absolute;
    inset: -20%;
    border-radius: 999px;
    border: 1px dashed hsl(var(--primary) / 0.25);
    animation: osOrbit 16s linear infinite;
  }

  @keyframes osOrbit {
    to {
      transform: rotate(360deg);
    }
  }

  .os-insight {
    @apply border p-4;
    border-radius: theme('borderRadius.os-md');
    border-color: hsl(var(--border) / 0.6);
    background: linear-gradient(135deg, hsl(var(--primary) / 0.12), hsl(var(--card) / 0.7));
  }

  .os-critical {
    @apply border px-4 py-3 font-semibold;
    border-radius: theme('borderRadius.os-sm');
    font-size: theme('fontSize.os-sm');
    border-color: hsl(var(--border) / 0.6);
    background: hsl(var(--card) / 0.6);
    transition: all 0.2s ease;
  }

  .os-critical:hover {
    border-color: hsl(var(--primary) / 0.5);
    box-shadow: var(--os-glow);
    transform: translateY(-1px);
  }

  /* ============================================================
     TRADE WORKSPACE TIMELINE
     ============================================================ */
  .os-timeline {
    @apply relative grid gap-3;
  }

  .os-timeline::before {
    content: "";
    position: absolute;
    left: 20px;
    top: 12px;
    bottom: 12px;
    width: 2px;
    border-radius: 999px;
    background: linear-gradient(180deg, hsl(var(--border) / 0.6), transparent 85%);
  }

  .os-timeline-node {
    @apply relative flex items-center justify-between border px-4 py-3;
    border-radius: theme('borderRadius.os-md');
    border-color: var(--os-stroke);
    background: var(--os-surface-1);
    transition: all 0.2s ease;
  }

  .os-timeline-node.is-complete {
    border-color: hsl(var(--success) / 0.45);
    background: hsl(var(--success) / 0.12);
  }

  .os-timeline-node.is-active {
    border-color: hsl(var(--primary) / 0.6);
    background: hsl(var(--primary) / 0.12);
    box-shadow: 0 0 24px hsl(var(--primary) / 0.25);
  }

  .os-timeline-node.is-next {
    border-color: hsl(var(--primary) / 0.35);
    background: hsl(var(--primary) / 0.06);
    box-shadow: 0 0 18px hsl(var(--primary) / 0.18);
  }

  .os-timeline-node.is-locked {
    opacity: 0.45;
    filter: saturate(0.3);
  }

  .os-timeline-step {
    @apply rounded-full flex items-center justify-center font-semibold;
    width: 2.25rem;
    height: 2.25rem;
    font-size: theme('fontSize.os-xs');
    background: var(--os-surface-2);
    color: var(--os-text-secondary);
    box-shadow: 0 0 0 3px hsl(var(--background));
  }

  .os-timeline-step.is-active {
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  .os-timeline-step.is-complete {
    background: hsl(var(--success));
    color: hsl(var(--success-foreground));
  }

  .os-timeline-node.is-next .os-timeline-step {
    animation: osPulseGlow 1.6s ease-in-out infinite;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
  }

  @keyframes osPulseGlow {

    0%,
    100% {
      box-shadow: 0 0 0 3px hsl(var(--background)), 0 0 12px hsl(var(--primary) / 0.35);
    }

    50% {
      box-shadow: 0 0 0 3px hsl(var(--background)), 0 0 24px hsl(var(--primary) / 0.55);
    }
  }

  /* ============================================================
     OS CONTRAST SAFETY - Keep text readable in both modes
     ============================================================ */
  html:not(.dark) .os-page .text-white {
    color: var(--os-text-primary) !important;
  }

  html:not(.dark) .os-page .text-white\/90,
  html:not(.dark) .os-page .text-white\/80,
  html:not(.dark) .os-page .text-white\/70,
  html:not(.dark) .os-page .text-white\/60,
  html:not(.dark) .os-page .text-white\/50,
  html:not(.dark) .os-page .text-white\/40 {
    color: var(--os-text-secondary) !important;
  }

  html.dark .os-page .text-black {
    color: var(--os-text-primary) !important;
  }

  html.dark .os-page .bg-white,
  html.dark .os-page .bg-white\/98,
  html.dark .os-page .bg-white\/95,
  html.dark .os-page .bg-white\/90,
  html.dark .os-page .bg-white\/60,
  html.dark .os-page .bg-white\/50,
  html.dark .os-page .bg-white\/20,
  html.dark .os-page .bg-white\/15,
  html.dark .os-page .bg-white\/10,
  html.dark .os-page .bg-white\/5 {
    background-color: var(--os-surface-1) !important;
  }

  html:not(.dark) .os-page .border-white\/30,
  html:not(.dark) .os-page .border-white\/20,
  html:not(.dark) .os-page .border-white\/15,
  html:not(.dark) .os-page .border-white\/10,
  html:not(.dark) .os-page .border-white\/5 {
    border-color: var(--os-stroke) !important;
  }
}

@layer utilities {

  /* Animations */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(4px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-scale-in {
    animation: scaleIn 0.2s ease-out;
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }

    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-slide-in-right {
    animation: slideInRight 0.3s ease-out;
  }

  @keyframes slideInRight {
    from {
      opacity: 0;
      transform: translateX(20px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }

  .animate-pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  @keyframes pulseGlow {

    0%,
    100% {
      box-shadow: 0 0 5px hsl(var(--primary) / 0.3);
    }

    50% {
      box-shadow: 0 0 20px hsl(var(--primary) / 0.5);
    }
  }

  /* Gradient text */
  .text-gradient-gold {
    background: linear-gradient(135deg, hsl(var(--primary)) 0%, hsl(var(--os-accent-light)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Tabular numbers for data */
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }

  /* OS utility shims */
  .bg-os-surface-0 {
    background: var(--os-surface-0);
  }

  .bg-os-surface-1 {
    background: var(--os-surface-1);
  }

  .bg-os-surface-2 {
    background: var(--os-surface-2);
  }

  .border-os-stroke {
    border-color: var(--os-stroke);
  }

  .text-os-muted {
    color: var(--os-muted);
  }
}